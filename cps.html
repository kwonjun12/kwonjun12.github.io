<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CPS 테스트</title>
  <link rel="stylesheet" href="assets/styles.css" />
  <style>
    .cps-wrap{ text-align:center; margin-top:40px; color:white }
    .big-btn{ margin-top:30px; font-size:28px; padding:24px 40px; border-radius:14px; cursor:pointer; }
    .info{ margin-top:18px; font-size:18px }
  </style>
</head>
<body>
  <main class="cps-wrap">
    <h1>CPS 테스트</h1>
    <div class="info">남은 시간: <span id="time">5</span>s | 클릭 수: <span id="count">0</span></div>
    <button id="clicker" class="big-btn" style="background:#ff6b5b;color:#fff;border:none;">여기 클릭!</button>
    <div class="info">최고 CPS: <span id="best">0</span></div>
    <div style="margin-top:20px;"><a href="index.html" class="pill">메인으로</a></div>
  </main>

  <script>
    const clicker = document.getElementById('clicker');
    const timeEl = document.getElementById('time');
    const countEl = document.getElementById('count');
    const bestEl = document.getElementById('best');

    let time = 5; // 테스트 시간(초)
    let running = false;
    let totalClicks = 0;
    let interval;
    let best = 0;

    clicker.addEventListener('click', () => {
      totalClicks++;
      countEl.textContent = totalClicks;
      if (!running) startTest();
    });

    function startTest(){
      running = true;
      let remaining = time;
      timeEl.textContent = remaining;
      interval = setInterval(() => {
        remaining--;
        timeEl.textContent = remaining;
        if (remaining <= 0) {
          clearInterval(interval);
          running = false;
          const cps = (totalClicks / time).toFixed(2);
          if (cps > best) { best = cps; bestEl.textContent = best; }
          alert(`테스트 종료!\n총 클릭: ${totalClicks}\nCPS: ${cps}`);
          totalClicks = 0;
          countEl.textContent = 0;
        }
      },1000);
    }
  </script>
</body>
</html>
